(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{73474:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addfolder",function(){return n(93244)}])},93244:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(85893),o=n(67294),l=n(9230),a=n(46690),u=n(44961),c=n(33351),s=n(47568),i=n(41799),d=n(69396),f=n(34051),p=n.n(f),g=n(26953),x=n(48540),v=n(42660);async function*h(){throw new Error("Unsupported in this environment")}var w=n(1864),b=n.n(w),m=n(11163),y=n(64146),Z=n(60715),k=n(42484),F=n.n(k),N=(n(15371),n(54372)),S=n(31838),_=n(34155),E=[_.env.NFT_STORAGE_API_KEY],P=function(){(0,m.useRouter)();var e=(0,o.useState)([]),t=(e[0],e[1],(0,o.useState)(null)),n=(t[0],t[1]),r=(0,o.useState)(),l=r[0],a=r[1],u=(0,o.useState)(),c=(u[0],u[1]),f=(0,o.useState)(),w=(f[0],f[1]),k=(0,o.useState)(),P=(k[0],k[1]),C=(0,o.useState)(),T=C[0],j=C[1],U=(0,o.useState)({name:""}),G=U[0],I=U[1],R=function(){var e=(0,s.Z)(p().mark((function e(t){var r,o,l,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.name&&t){e.next=3;break}return e.abrupt("return");case 3:return console.log("About to upload selected Folder..."),3!==_.argv.length&&console.error("usage: ".concat(_.argv[0]," ").concat(_.argv[1]," <directory-path>")),_.argv[2],r=h(),o=new v.j3({APIKEY:E}),e.prev=8,console.log("Trying to upload folder to ipfs"),j("Uploading Folder to IPFS & Filecoin via NFT.storage."),console.log("storing file(s) from ".concat(b())),e.next=14,o.storeDirectory(r);case 14:return l=e.sent,console.log("cid is: ",{metaData:l}),w(l.url),e.next=19,o.status(l);case 19:return a=e.sent,console.log(a),e.abrupt("return",l);case 24:e.prev=24,e.t0=e.catch(8),n("Could store file to NFT.Storage - Aborted file upload."),console.log("Error Uploading Content",e.t0);case 28:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)(p().mark((function e(t){var r,o,l,a,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j("Adding transaction to Polygon Mumbai Blockchain."),r=new(F()),e.next=5,r.connect();case 5:return o=e.sent,l=new Z.Q(o),a=G.privatefile.toString(),u=new y.CH(S.E,N.Mt,l.getSigner()),console.log("Connected to contract",S.E),console.log("IPFS blockchain uri is ",t.url),e.next=13,u.createFile(t.url,a);case 13:return c=e.sent,console.log("File successfully created and added to Blockchain"),e.next=17,c.wait();case 17:return e.abrupt("return",c);case 20:e.prev=20,e.t0=e.catch(0),n("Failed to send tx to Polygon Mumbai."),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){console.log("getIPFSGatewayURL2 two is ..."),w(O(e)),j("File addition was successfully!"),console.log("Preview details completed")},L=function(){var e=(0,s.Z)(p().mark((function e(t,n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R(n);case 3:return r=e.sent,e.next=6,M(r);case 6:e.sent,D(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){return console.log("ipfsGateWayURL = ","ipfsGateWayURL"),"https://${urlArray[2]}.ipfs.nftstorage.link/${urlArra"};return(0,g.tZ)(x.xu,{as:"section",sx:A.section},(0,g.tZ)("div",{className:"bg-purple-100 text-4xl text-center text-black font-bold pt-10"},(0,g.tZ)("h1",null," Add Folder")),(0,g.tZ)("div",{className:"flex justify-center bg-purple-100"},(0,g.tZ)("div",{className:"w-1/2 flex flex-col pb-12 "},(0,g.tZ)("input",{placeholder:"Give the folder a name",className:"mt-5 border rounded p-4 text-xl",onChange:function(e){return I((0,d.Z)((0,i.Z)({},G),{name:e.target.value}))}}),(0,g.tZ)("div",{className:"MintNFT text-xl text-black"},(0,g.tZ)("form",null,(0,g.tZ)("h3",null,"Select a Folder"),(0,g.tZ)("input",{type:"file",multiple:!0,directory:"",mozdirectory:"",webkitdirectory:"true",onChange:function(e){console.log("folder for upload selected..."),a(e.target.files[0]),j(""),c(""),w(""),P("")},className:"text-black mt-2 border rounded text-xl"})),T&&(0,g.tZ)("p",null,T)),(0,g.tZ)("button",{type:"button",onClick:function(e){return L(e,l)},className:"font-bold mt-20 bg-purple-700 text-white text-2xl rounded p-4 shadow-lg"},"Publish Folder"))))},A={section:{backgroundColor:"primary",pt:[17,null,null,20,null],pb:[6,null,null,12,16]}};function C(){return(0,r.jsx)(l.f,{theme:a.Z,children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(u.Z,{title:"Add new folder",description:"add a new folder"}),(0,r.jsx)(P,{})]})})}},76647:function(){}},function(e){e.O(0,[277,826,563,216,991,381,451,774,888,179],(function(){return t=73474,e(e.s=t);var t}));var t=e.O();_N_E=t}]);