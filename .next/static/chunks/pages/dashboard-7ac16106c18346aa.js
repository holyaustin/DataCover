(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(30428)}])},30428:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var o=n(85893),r=n(67294),i=n(9230),a=n(46690),u=n(44961),l=n(33351),c=n(47568),s=n(70603),d=n(34051),f=n.n(d),p=n(26953),v=n(48540),m=n(64146),h=n(60715),y=n(9669),g=n.n(y),b=n(11163),w=n(42484),x=n.n(w),k=n(73935);function E(){return E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},E.apply(this,arguments)}var N="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,Z={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},A=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],C=function(t,e,n,o,r){var i=r.offsetX,a=r.offsetY,u=o?8:0,l=n.split(" "),c=t.top+t.height/2,s=t.left+t.width/2,d=e.height,f=e.width,p=c-d/2,v=s-f/2,m="",h="0%",y="0%";switch(l[0]){case"top":p-=d/2+t.height/2+u,m="rotate(180deg)  translateX(50%)",h="100%",y="50%";break;case"bottom":p+=d/2+t.height/2+u,m="rotate(0deg) translateY(-100%) translateX(-50%)",y="50%";break;case"left":v-=f/2+t.width/2+u,m=" rotate(90deg)  translateY(50%) translateX(-25%)",y="100%",h="50%";break;case"right":v+=f/2+t.width/2+u,m="rotate(-90deg)  translateY(-150%) translateX(25%)",h="50%"}switch(l[1]){case"top":p=t.top,h=t.height/2+"px";break;case"bottom":p=t.top-d+t.height,h=d-t.height/2+"px";break;case"left":v=t.left,y=t.width/2+"px";break;case"right":v=t.left-f+t.width,y=f-t.width/2+"px"}return{top:p="top"===l[0]?p-a:p+a,left:v="left"===l[0]?v-i:v+i,transform:m,arrowLeft:y,arrowTop:h}},S=function(t,e,n,o,r,i){var a=r.offsetX,u=r.offsetY,l={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,s=function(t){var e={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"===typeof t){var n=document.querySelector(t);null!==n&&(e=n.getBoundingClientRect())}return e}(i),d=Array.isArray(n)?n:[n];for((i||Array.isArray(n))&&(d=[].concat(d,A));c<d.length;){var f={top:(l=C(t,e,d[c],o,{offsetX:a,offsetY:u})).top,left:l.left,width:e.width,height:e.height};if(!(f.top<=s.top||f.left<=s.left||f.top+f.height>=s.top+s.height||f.left+f.width>=s.left+s.width))break;c++}return l},L=0,T=(0,r.forwardRef)((function(t,e){var n=t.trigger,o=void 0===n?null:n,i=t.onOpen,a=void 0===i?function(){}:i,u=t.onClose,l=void 0===u?function(){}:u,c=t.defaultOpen,s=void 0!==c&&c,d=t.open,f=void 0===d?void 0:d,p=t.disabled,v=void 0!==p&&p,m=t.nested,h=void 0!==m&&m,y=t.closeOnDocumentClick,g=void 0===y||y,b=t.repositionOnResize,w=void 0===b||b,x=t.closeOnEscape,A=void 0===x||x,C=t.on,T=void 0===C?["click"]:C,j=t.contentStyle,O=void 0===j?{}:j,I=t.arrowStyle,R=void 0===I?{}:I,P=t.overlayStyle,X=void 0===P?{}:P,_=t.className,M=void 0===_?"":_,Y=t.position,z=void 0===Y?"bottom center":Y,B=t.modal,D=void 0!==B&&B,F=t.lockScroll,H=void 0!==F&&F,U=t.arrow,q=void 0===U||U,W=t.offsetX,G=void 0===W?0:W,K=t.offsetY,Q=void 0===K?0:K,$=t.mouseEnterDelay,J=void 0===$?100:$,V=t.mouseLeaveDelay,tt=void 0===V?100:V,et=t.keepTooltipInside,nt=void 0!==et&&et,ot=t.children,rt=(0,r.useState)(f||s),it=rt[0],at=rt[1],ut=(0,r.useRef)(null),lt=(0,r.useRef)(null),ct=(0,r.useRef)(null),st=(0,r.useRef)(null),dt=(0,r.useRef)("popup-"+ ++L),ft=!!D||!o,pt=(0,r.useRef)(0);N((function(){return it?(st.current=document.activeElement,Zt(),kt(),wt()):xt(),function(){clearTimeout(pt.current)}}),[it]),(0,r.useEffect)((function(){"boolean"===typeof f&&(f?vt():mt())}),[f,v]);var vt=function(t){it||v||(at(!0),setTimeout((function(){return a(t)}),0))},mt=function(t){var e;it&&!v&&(at(!1),ft&&(null===(e=st.current)||void 0===e||e.focus()),setTimeout((function(){return l(t)}),0))},ht=function(t){null===t||void 0===t||t.stopPropagation(),it?mt(t):vt(t)},yt=function(t){clearTimeout(pt.current),pt.current=setTimeout((function(){return vt(t)}),J)},gt=function(t){null===t||void 0===t||t.preventDefault(),ht()},bt=function(t){clearTimeout(pt.current),pt.current=setTimeout((function(){return mt(t)}),tt)},wt=function(){ft&&H&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},xt=function(){ft&&H&&(document.getElementsByTagName("body")[0].style.overflow="auto")},kt=function(){var t,e=null===lt||void 0===lt||null===(t=lt.current)||void 0===t?void 0:t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(e)[0];null===n||void 0===n||n.focus()};(0,r.useImperativeHandle)(e,(function(){return{open:function(){vt()},close:function(){mt()},toggle:function(){ht()}}}));var Et,Nt,Zt=function(){if(!ft&&it&&(null===ut||void 0===ut?void 0:ut.current)&&(null===ut||void 0===ut?void 0:ut.current)&&(null===lt||void 0===lt?void 0:lt.current)){var t,e,n=ut.current.getBoundingClientRect(),o=lt.current.getBoundingClientRect(),r=S(n,o,z,q,{offsetX:G,offsetY:Q},nt);if(lt.current.style.top=r.top+window.scrollY+"px",lt.current.style.left=r.left+window.scrollX+"px",q&&ct.current)ct.current.style.transform=r.transform,ct.current.style.setProperty("-ms-transform",r.transform),ct.current.style.setProperty("-webkit-transform",r.transform),ct.current.style.top=(null===(t=R.top)||void 0===t?void 0:t.toString())||r.arrowTop,ct.current.style.left=(null===(e=R.left)||void 0===e?void 0:e.toString())||r.arrowLeft}};Et=mt,void 0===(Nt=A)&&(Nt=!0),(0,r.useEffect)((function(){if(Nt){var t=function(t){"Escape"===t.key&&Et(t)};return document.addEventListener("keyup",t),function(){Nt&&document.removeEventListener("keyup",t)}}}),[Et,Nt]),function(t,e){void 0===e&&(e=!0),(0,r.useEffect)((function(){if(e){var n=function(e){if(9===e.keyCode){var n,o=null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(o);if(1===r.length)return void e.preventDefault();var i=r[0],a=r[r.length-1];e.shiftKey&&document.activeElement===i?(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),i.focus())}};return document.addEventListener("keydown",n),function(){e&&document.removeEventListener("keydown",n)}}}),[t,e])}(lt,it&&ft),function(t,e){void 0===e&&(e=!0),(0,r.useEffect)((function(){if(e){var n=function(){t()};return window.addEventListener("resize",n),function(){e&&window.removeEventListener("resize",n)}}}),[t,e])}(Zt,w),function(t,e,n){void 0===n&&(n=!0),(0,r.useEffect)((function(){if(n){var o=function(n){var o=Array.isArray(t)?t:[t],r=!1;o.forEach((function(t){t.current&&!t.current.contains(n.target)||(r=!0)})),n.stopPropagation(),r||e(n)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){n&&(document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o))}}}),[t,e,n])}(o?[lt,ut]:[lt],mt,g&&!h);var At=function(){return r.createElement("div",Object.assign({},function(){var t=ft?Z.popupContent.modal:Z.popupContent.tooltip,e={className:"popup-content "+(""!==M?M.split(" ").map((function(t){return t+"-content"})).join(" "):""),style:E({},t,O,{pointerEvents:"auto"}),ref:lt,onClick:function(t){t.stopPropagation()}};return!D&&T.indexOf("hover")>=0&&(e.onMouseEnter=yt,e.onMouseLeave=bt),e}(),{key:"C",role:ft?"dialog":"tooltip",id:dt.current}),q&&!ft&&r.createElement("div",{ref:ct,style:Z.popupArrow},r.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(t){return t+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:E({position:"absolute"},R)},r.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ot&&"function"===typeof ot?ot(mt,it):ot)},Ct=!(T.indexOf("hover")>=0),St=ft?Z.overlay.modal:Z.overlay.tooltip,Lt=[Ct&&r.createElement("div",{key:"O","data-testid":"overlay","data-popup":ft?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(t){return t+"-overlay"})).join(" "):""),style:E({},St,X,{pointerEvents:g&&h||ft?"auto":"none"}),onClick:g&&h?mt:void 0,tabIndex:-1},ft&&At()),!ft&&At()];return r.createElement(r.Fragment,null,function(){for(var t={key:"T",ref:ut,"aria-describedby":dt.current},e=Array.isArray(T)?T:[T],n=0,i=e.length;n<i;n++)switch(e[n]){case"click":t.onClick=ht;break;case"right-click":t.onContextMenu=gt;break;case"hover":t.onMouseEnter=yt,t.onMouseLeave=bt;break;case"focus":t.onFocus=yt,t.onBlur=bt}if("function"===typeof o){var a=o(it);return!!o&&r.cloneElement(a,t)}return!!o&&r.cloneElement(o,t)}(),it&&k.createPortal(Lt,function(){var t=document.getElementById("popup-root");return null===t&&((t=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(t)),t}()))})),j=(n(28683),n(54372)),O=n(31838);function I(){(0,b.useRouter)();var t=(0,s.Z)(r.useState(!1),2),e=(t[0],t[1],(0,r.useState)("")),n=e[0],o=e[1],i=(0,r.useState)([]),a=i[0],u=i[1],l=(0,r.useState)("not-loaded"),d=l[0],y=l[1];function w(){return k.apply(this,arguments)}function k(){return k=(0,c.Z)(f().mark((function t(){var e,n,o,r,i,a,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new(x())({network:"mainnet",cacheProvider:!0}),t.next=3,e.connect();case 3:return n=t.sent,o=new h.Q(n),r=o.getSigner(),i=new m.CH(O.E,j.Mt,r),t.next=9,i.fetchMyFiles();case 9:return a=t.sent,t.next=12,Promise.all(a.map(function(){var t=(0,c.Z)(f().mark((function t(e){var n,o,r,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.tokenURI(e.tokenId);case 2:return n=t.sent,console.log("token Uri is ",n),o=E(n),console.log("Http Uri is ",o),t.next=8,g().get(o);case 8:return r=t.sent,a={tokenId:e.tokenId.toNumber(),image:E(r.data.image),name:r.data.name,description:r.data.description,sharelink:E(r.data.image)},console.log("item returned is ",a),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 12:l=t.sent,u(l),y("loaded");case 15:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}(0,r.useEffect)((function(){w()}),[]);var E=function(t){var e=t.split("/");return"https://".concat(e[2],".ipfs.nftstorage.link/").concat(e[3])},N=function(){var t=(0,c.Z)(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:o("Copied!"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o("Failed to copy!");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return"loaded"!==d||a.length?(0,p.tZ)(v.xu,{as:"section",sx:R.section},(0,p.tZ)("div",{className:"bg-purple-100 text-4xl text-center text-black font-bold pt-10"},(0,p.tZ)("h1",null," My Drive")),(0,p.tZ)("div",{className:"flex justify-center bg-purple-100 mb-12"},(0,p.tZ)("div",{className:"px-4",style:{maxWidth:"1600px"}},(0,p.tZ)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-4 pt-4"},a.map((function(t,e){return(0,p.tZ)("div",{key:e,className:"shadow rounded-xl overflow-hidden border-2 border-white-500"},(0,p.tZ)("iframe",{title:"fileNFT",height:"auto",width:"100%",objectfit:"cover",src:"".concat(t.image,"#toolbar=0&embedded=true"),className:"py-3 object-cover h-500"}),(0,p.tZ)("div",{className:"p-1"},(0,p.tZ)("p",{style:{height:"34px"},className:"text-xl text-purple-700 font-semibold"},"Name: ",t.name),(0,p.tZ)("p",{className:"text-xl font-bold text-black"},"Public : ",t.privatefile)),(0,p.tZ)("div",{className:"p-2 bg-black"},(0,p.tZ)(T,{trigger:(0,p.tZ)("button",{type:"button",className:"w-full bg-purple-700 text-white font-bold py-2 px-2 rounded"},"Get Share Link"),position:"bottom center"},(0,p.tZ)("div",{className:" bg-purple-200 text-black font-bold py-2 px-2 rounded"},t.sharelink),(0,p.tZ)("button",{onClick:function(){return N([t.sharelink])}},"Copy Link"),n)))})))))):(0,p.tZ)("div",{sx:R.section},(0,p.tZ)("h1",{className:"px-20 py-10 text-3xl text-white"},"Empty drive, no file yet"))}var R={section:{backgroundColor:"primary",pt:[17,null,null,20,null],pb:[6,null,null,12,16]}};function P(){return(0,o.jsx)(i.f,{theme:a.Z,children:(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(u.Z,{title:"Add new file",description:"add a new file"}),(0,o.jsx)(I,{})]})})}},28683:function(){},70603:function(t,e,n){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,{Z:function(){return r}})}},function(t){t.O(0,[277,826,563,216,764,669,381,451,774,888,179],(function(){return e=51075,t(t.s=e);var e}));var e=t.O();_N_E=e}]);